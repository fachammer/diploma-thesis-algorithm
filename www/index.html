<!doctype html>

<html>

  <head>
    <meta charset="utf-8">
    <title>WASM test</title>
  </head>

  <body>
    <script>
      async function setup() {
      const imports = {
          env: {
            alert: (ptr, len) => {
              window.alert(getStringFromWasm0(ptr, len))
            }
          }
        }
        let wasmPromise = WebAssembly.instantiateStreaming(fetch("../target/wasm32-unknown-unknown/debug/thesis_algorithm.wasm"), imports);
        let wasm;
        const cachedTextDecoder = new TextDecoder('utf-8', { ignoreBOM: true, fatal: true });
        cachedTextDecoder.decode();

        let cachedUint8Memory0 = new Uint8Array();

        function getUint8Memory0() {
            if (cachedUint8Memory0.byteLength === 0) {
                cachedUint8Memory0 = new Uint8Array(wasm.memory.buffer);
            }
            return cachedUint8Memory0;
        }

        function getStringFromWasm0(ptr, len) {
          return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));
        }

        const wasmModule = await wasmPromise;
        wasm = wasmModule.instance.exports;
        wasm.greet();
      }
      setup();
    </script>
  </body>

</html>
